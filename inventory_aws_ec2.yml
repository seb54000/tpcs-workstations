plugin: aws_ec2
regions:
  - eu-west-3  # RÃ©gion Paris
aws_access_key: "{{ lookup('env','AWS_ACCESS_KEY_ID') }}"
aws_secret_key: "{{ lookup('env','AWS_SECRET_ACCESS_KEY') }}"

hostnames:
  - name: 'tag:Name'

keyed_groups:
  - key: tags.Roles.split(';')
    prefix: role
  - key: instance_type
    prefix: instance_type

filters:
  instance-state-name: running

compose:
  ansible_host: public_ip_address
  ansible_user: tags.Name